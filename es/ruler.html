<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端规范化 | yiluhuakai</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.992cb7aa.css" as="style"><link rel="preload" href="/assets/js/app.9b56a05a.js" as="script"><link rel="preload" href="/assets/js/2.b22280cb.js" as="script"><link rel="preload" href="/assets/js/46.5a74f2cd.js" as="script"><link rel="prefetch" href="/assets/js/10.413ab2ab.js"><link rel="prefetch" href="/assets/js/100.2d785741.js"><link rel="prefetch" href="/assets/js/101.a9fd3349.js"><link rel="prefetch" href="/assets/js/11.99f54ddd.js"><link rel="prefetch" href="/assets/js/12.c46f64f3.js"><link rel="prefetch" href="/assets/js/13.6add00c5.js"><link rel="prefetch" href="/assets/js/14.40115781.js"><link rel="prefetch" href="/assets/js/15.c3827c6c.js"><link rel="prefetch" href="/assets/js/16.304d275d.js"><link rel="prefetch" href="/assets/js/17.006e2fe4.js"><link rel="prefetch" href="/assets/js/18.7f93828f.js"><link rel="prefetch" href="/assets/js/19.a72c6116.js"><link rel="prefetch" href="/assets/js/20.d175ff74.js"><link rel="prefetch" href="/assets/js/21.7092a034.js"><link rel="prefetch" href="/assets/js/22.1419ba41.js"><link rel="prefetch" href="/assets/js/23.ce5e3c1b.js"><link rel="prefetch" href="/assets/js/24.9f9edaa3.js"><link rel="prefetch" href="/assets/js/25.a57ae5dc.js"><link rel="prefetch" href="/assets/js/26.5ba697f1.js"><link rel="prefetch" href="/assets/js/27.9ecaa5dc.js"><link rel="prefetch" href="/assets/js/28.290c65fe.js"><link rel="prefetch" href="/assets/js/29.bdbc3eeb.js"><link rel="prefetch" href="/assets/js/3.ac44586b.js"><link rel="prefetch" href="/assets/js/30.6f37d998.js"><link rel="prefetch" href="/assets/js/31.b1ac1238.js"><link rel="prefetch" href="/assets/js/32.024f8182.js"><link rel="prefetch" href="/assets/js/33.202e11b5.js"><link rel="prefetch" href="/assets/js/34.e755ffc0.js"><link rel="prefetch" href="/assets/js/35.376b8f63.js"><link rel="prefetch" href="/assets/js/36.56735f24.js"><link rel="prefetch" href="/assets/js/37.b7d03c63.js"><link rel="prefetch" href="/assets/js/38.d9407e30.js"><link rel="prefetch" href="/assets/js/39.4f87e45d.js"><link rel="prefetch" href="/assets/js/4.a4a037c8.js"><link rel="prefetch" href="/assets/js/40.5a53ee48.js"><link rel="prefetch" href="/assets/js/41.f7fa6a68.js"><link rel="prefetch" href="/assets/js/42.3c07d4ad.js"><link rel="prefetch" href="/assets/js/43.2965402d.js"><link rel="prefetch" href="/assets/js/44.fef5da48.js"><link rel="prefetch" href="/assets/js/45.ff058ba7.js"><link rel="prefetch" href="/assets/js/47.5931bb97.js"><link rel="prefetch" href="/assets/js/48.cbf85ab3.js"><link rel="prefetch" href="/assets/js/49.0319f8e4.js"><link rel="prefetch" href="/assets/js/5.d0d45788.js"><link rel="prefetch" href="/assets/js/50.497cb73f.js"><link rel="prefetch" href="/assets/js/51.4b6e5c5b.js"><link rel="prefetch" href="/assets/js/52.f4edf34f.js"><link rel="prefetch" href="/assets/js/53.df9c0557.js"><link rel="prefetch" href="/assets/js/54.1654be3b.js"><link rel="prefetch" href="/assets/js/55.c9e37e1f.js"><link rel="prefetch" href="/assets/js/56.052c5808.js"><link rel="prefetch" href="/assets/js/57.cf8cebef.js"><link rel="prefetch" href="/assets/js/58.220252cd.js"><link rel="prefetch" href="/assets/js/59.7e76271a.js"><link rel="prefetch" href="/assets/js/6.b5583d51.js"><link rel="prefetch" href="/assets/js/60.38c88311.js"><link rel="prefetch" href="/assets/js/61.c4b0da1c.js"><link rel="prefetch" href="/assets/js/62.d8be952c.js"><link rel="prefetch" href="/assets/js/63.19c02fd0.js"><link rel="prefetch" href="/assets/js/64.9d51d342.js"><link rel="prefetch" href="/assets/js/65.31c63e7c.js"><link rel="prefetch" href="/assets/js/66.badcb6df.js"><link rel="prefetch" href="/assets/js/67.83764c63.js"><link rel="prefetch" href="/assets/js/68.152c45b6.js"><link rel="prefetch" href="/assets/js/69.2119cafb.js"><link rel="prefetch" href="/assets/js/7.d21b1042.js"><link rel="prefetch" href="/assets/js/70.ff7211f3.js"><link rel="prefetch" href="/assets/js/71.26e7783e.js"><link rel="prefetch" href="/assets/js/72.dc5a3ba6.js"><link rel="prefetch" href="/assets/js/73.d8356ad1.js"><link rel="prefetch" href="/assets/js/74.10184aff.js"><link rel="prefetch" href="/assets/js/75.716811ca.js"><link rel="prefetch" href="/assets/js/76.046e6155.js"><link rel="prefetch" href="/assets/js/77.d287e80f.js"><link rel="prefetch" href="/assets/js/78.635ed9d3.js"><link rel="prefetch" href="/assets/js/79.4485123f.js"><link rel="prefetch" href="/assets/js/8.8bd3dfa9.js"><link rel="prefetch" href="/assets/js/80.74fc122c.js"><link rel="prefetch" href="/assets/js/81.cb3ce31c.js"><link rel="prefetch" href="/assets/js/82.bf81591e.js"><link rel="prefetch" href="/assets/js/83.01b0002d.js"><link rel="prefetch" href="/assets/js/84.6af4ae46.js"><link rel="prefetch" href="/assets/js/85.31122a7c.js"><link rel="prefetch" href="/assets/js/86.7641b1ab.js"><link rel="prefetch" href="/assets/js/87.63912fdd.js"><link rel="prefetch" href="/assets/js/88.01d6d061.js"><link rel="prefetch" href="/assets/js/89.ec494ad7.js"><link rel="prefetch" href="/assets/js/9.17f8341c.js"><link rel="prefetch" href="/assets/js/90.a2905192.js"><link rel="prefetch" href="/assets/js/91.5b1b5e00.js"><link rel="prefetch" href="/assets/js/92.f8112523.js"><link rel="prefetch" href="/assets/js/93.8e9fd5a8.js"><link rel="prefetch" href="/assets/js/94.41217af6.js"><link rel="prefetch" href="/assets/js/95.b253d44f.js"><link rel="prefetch" href="/assets/js/96.76495ed0.js"><link rel="prefetch" href="/assets/js/97.9f48729e.js"><link rel="prefetch" href="/assets/js/98.0e36c4a8.js"><link rel="prefetch" href="/assets/js/99.5b6ab9af.js">
    <link rel="stylesheet" href="/assets/css/0.styles.992cb7aa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">yiluhuakai</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/leetcode/" class="nav-link">
  LeetCode
</a></div><div class="nav-item"><a href="/golang/" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/mysql/" class="nav-link">
  Mysql
</a></div><div class="nav-item"><a href="/clang/" class="nav-link">
  C语言
</a></div><div class="nav-item"><a href="/es/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/nodejs/" class="nav-link">
  nodejs
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/leetcode/" class="nav-link">
  LeetCode
</a></div><div class="nav-item"><a href="/golang/" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/mysql/" class="nav-link">
  Mysql
</a></div><div class="nav-item"><a href="/clang/" class="nav-link">
  C语言
</a></div><div class="nav-item"><a href="/es/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/nodejs/" class="nav-link">
  nodejs
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/es/const_let.html" class="sidebar-link">let和const</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/obj.html" class="sidebar-link">对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/obj.html#对象字面量的增强" class="sidebar-link">对象字面量的增强</a></li><li class="sidebar-sub-header"><a href="/es/obj.html#object-assign" class="sidebar-link">Object.assign</a></li><li class="sidebar-sub-header"><a href="/es/obj.html#object-is" class="sidebar-link">Object.is</a></li><li class="sidebar-sub-header"><a href="/es/obj.html#proxy" class="sidebar-link">Proxy</a></li><li class="sidebar-sub-header"><a href="/es/obj.html#reflect" class="sidebar-link">Reflect</a></li><li class="sidebar-sub-header"><a href="/es/obj.html#promise" class="sidebar-link">Promise</a></li><li class="sidebar-sub-header"><a href="/es/obj.html#class" class="sidebar-link">Class</a></li></ul></li><li><a href="/es/func.html" class="sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/func.html#默认值参数" class="sidebar-link">默认值参数</a></li><li class="sidebar-sub-header"><a href="/es/func.html#剩余参数" class="sidebar-link">剩余参数</a></li><li class="sidebar-sub-header"><a href="/es/func.html#数组的解构" class="sidebar-link">数组的解构</a></li><li class="sidebar-sub-header"><a href="/es/func.html#箭头函数" class="sidebar-link">箭头函数</a></li></ul></li><li><a href="/es/string.html" class="sidebar-link">ES中的模版字符串</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/string.html#es中的模版字符串" class="sidebar-link">ES中的模版字符串</a></li><li class="sidebar-sub-header"><a href="/es/string.html#es2015中新增的关于操作字符串的方法" class="sidebar-link">ES2015中新增的关于操作字符串的方法</a></li></ul></li><li><a href="/es/set_map.html" class="sidebar-link">set 和 map</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/set_map.html#set" class="sidebar-link">set</a></li><li class="sidebar-sub-header"><a href="/es/set_map.html#map" class="sidebar-link">map</a></li></ul></li><li><a href="/es/deconstruction.html" class="sidebar-link">解构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/deconstruction.html#数组的解构" class="sidebar-link">数组的解构</a></li><li class="sidebar-sub-header"><a href="/es/deconstruction.html#对象的解构" class="sidebar-link">对象的解构</a></li><li class="sidebar-sub-header"><a href="/es/deconstruction.html#字符串的解构" class="sidebar-link">字符串的解构</a></li></ul></li><li><a href="/es/Symbol.html" class="sidebar-link">Symbol</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/for_of.html" class="sidebar-link">for..of 和迭代器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/for_of.html#for-of-和迭代器" class="sidebar-link">for..of 和迭代器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/for_of.html#for-of-循环" class="sidebar-link">for ... of 循环</a></li><li class="sidebar-sub-header"><a href="/es/for_of.html#迭代器模式和迭代器" class="sidebar-link">迭代器模式和迭代器</a></li><li class="sidebar-sub-header"><a href="/es/for_of.html#生成器函数" class="sidebar-link">生成器函数</a></li></ul></li></ul></li><li><a href="/es/es2016_17.html" class="sidebar-link">ES2016和ES2017新特性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/es2016_17.html#es2016和es2017新特性" class="sidebar-link">ES2016和ES2017新特性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/es2016_17.html#es2016" class="sidebar-link">ES2016</a></li><li class="sidebar-sub-header"><a href="/es/es2016_17.html#es2017" class="sidebar-link">ES2017</a></li></ul></li></ul></li><li><a href="/es/Ts.html" class="sidebar-link">TypeScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/Ts.html#typescript" class="sidebar-link">TypeScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/Ts.html#强类型和弱类型" class="sidebar-link">强类型和弱类型</a></li><li class="sidebar-sub-header"><a href="/es/Ts.html#typescript简介" class="sidebar-link">TypeScript简介</a></li><li class="sidebar-sub-header"><a href="/es/Ts.html#typescript上手" class="sidebar-link">TypeScript上手</a></li><li class="sidebar-sub-header"><a href="/es/Ts.html#ts的原始类型" class="sidebar-link">ts的原始类型</a></li><li class="sidebar-sub-header"><a href="/es/Ts.html#中文错误消息" class="sidebar-link">中文错误消息</a></li><li class="sidebar-sub-header"><a href="/es/Ts.html#ts作用域问题" class="sidebar-link">TS作用域问题</a></li><li class="sidebar-sub-header"><a href="/es/Ts.html#ts中的类型注解" class="sidebar-link">TS中的类型注解</a></li><li class="sidebar-sub-header"><a href="/es/Ts.html#ts的polyfill-垫片" class="sidebar-link">TS的polyfill(垫片)</a></li><li class="sidebar-sub-header"><a href="/es/Ts.html#在vue项目中加入ts-https-cn-vuejs-org-v2-guide-typescript-html" class="sidebar-link">[在vue项目中加入ts]（https://cn.vuejs.org/v2/guide/typescript.html）</a></li><li class="sidebar-sub-header"><a href="/es/Ts.html#标注-prop" class="sidebar-link" style="padding-left:3rem;">标注 Prop</a></li><li class="sidebar-sub-header"><a href="/es/Ts.html#再已有的js项目中加入类型验https-cloud-tencent-com-developer-article-1006180" class="sidebar-link">再已有的JS项目中加入类型验https://cloud.tencent.com/developer/article/1006180</a></li></ul></li></ul></li><li><a href="/es/flow.html" class="sidebar-link">flow</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/flow.html#flow" class="sidebar-link">flow</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/flow.html#flow的使用" class="sidebar-link">flow的使用</a></li><li class="sidebar-sub-header"><a href="/es/flow.html#flow的语法规则" class="sidebar-link">flow的语法规则</a></li><li class="sidebar-sub-header"><a href="/es/flow.html#flow类型文档" class="sidebar-link">flow类型文档</a></li><li class="sidebar-sub-header"><a href="/es/flow.html#运行环境api" class="sidebar-link">运行环境api</a></li></ul></li></ul></li><li><a href="/es/js-better.html" class="sidebar-link">JS性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/js-better.html#js性能优化" class="sidebar-link">JS性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/js-better.html#什么是性能优化" class="sidebar-link">什么是性能优化</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#js的内存管理" class="sidebar-link">JS的内存管理</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#js的垃圾回收" class="sidebar-link">JS的垃圾回收</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#gc的定义与作用" class="sidebar-link">GC的定义与作用</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#gc里面的垃圾" class="sidebar-link">GC里面的垃圾</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#gc算法" class="sidebar-link">GC算法</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#常见的gc算法" class="sidebar-link">常见的GC算法</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#引用计数算法" class="sidebar-link">引用计数算法</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#标记清除算法" class="sidebar-link">标记清除算法</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#标记整理算法" class="sidebar-link">标记整理算法</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#v8介绍" class="sidebar-link">V8介绍</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#v8的垃圾回收" class="sidebar-link">v8的垃圾回收</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#使用performance" class="sidebar-link">使用performance</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#如何判断是否存在频繁的gc" class="sidebar-link">如何判断是否存在频繁的GC</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#频繁gc的带来的问题" class="sidebar-link">频繁GC的带来的问题</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#代码优化介绍" class="sidebar-link">代码优化介绍</a></li><li class="sidebar-sub-header"><a href="/es/js-better.html#遍历对象" class="sidebar-link">遍历对象</a></li></ul></li></ul></li><li><a href="/es/project.html" class="sidebar-link">前端工程化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/project.html#前端工程化" class="sidebar-link">前端工程化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/project.html#前端工程化的目的" class="sidebar-link">前端工程化的目的</a></li><li class="sidebar-sub-header"><a href="/es/project.html#前端工程化的表现" class="sidebar-link">前端工程化的表现</a></li><li class="sidebar-sub-header"><a href="/es/project.html#一些成熟的工程化集成" class="sidebar-link">一些成熟的工程化集成</a></li><li class="sidebar-sub-header"><a href="/es/project.html#脚手架工具" class="sidebar-link">脚手架工具</a></li><li class="sidebar-sub-header"><a href="/es/project.html#常用的脚手架工具" class="sidebar-link">常用的脚手架工具</a></li><li class="sidebar-sub-header"><a href="/es/project.html#yeoman的使用" class="sidebar-link">yeoman的使用</a></li><li class="sidebar-sub-header"><a href="/es/project.html#自定义generator" class="sidebar-link">自定义generator</a></li><li class="sidebar-sub-header"><a href="/es/project.html#创建一个vue-js的脚手架" class="sidebar-link">创建一个vue.js的脚手架</a></li><li class="sidebar-sub-header"><a href="/es/project.html#plop脚手架" class="sidebar-link">plop脚手架</a></li><li class="sidebar-sub-header"><a href="/es/project.html#plop的使用" class="sidebar-link">plop的使用</a></li><li class="sidebar-sub-header"><a href="/es/project.html#使用plop在react中创建组件" class="sidebar-link">使用plop在react中创建组件</a></li><li class="sidebar-sub-header"><a href="/es/project.html#脚手架的工具原理" class="sidebar-link">脚手架的工具原理</a></li><li class="sidebar-sub-header"><a href="/es/project.html#脚手架具体实现" class="sidebar-link">脚手架具体实现</a></li><li class="sidebar-sub-header"><a href="/es/project.html#自动化构建" class="sidebar-link">自动化构建</a></li><li class="sidebar-sub-header"><a href="/es/project.html#自动化构建初体验" class="sidebar-link">自动化构建初体验</a></li><li class="sidebar-sub-header"><a href="/es/project.html#常用的自动化构建工具" class="sidebar-link">常用的自动化构建工具</a></li><li class="sidebar-sub-header"><a href="/es/project.html#grunt的基本使用" class="sidebar-link">grunt的基本使用</a></li><li class="sidebar-sub-header"><a href="/es/project.html#grunt常用插件的使用" class="sidebar-link">grunt常用插件的使用</a></li><li class="sidebar-sub-header"><a href="/es/project.html#gulp的使用" class="sidebar-link">gulp的使用</a></li><li class="sidebar-sub-header"><a href="/es/project.html#创建项目目录并进入" class="sidebar-link" style="padding-left:3rem;">创建项目目录并进入</a></li><li class="sidebar-sub-header"><a href="/es/project.html#在项目目录下创建-package-json-文件" class="sidebar-link" style="padding-left:3rem;">在项目目录下创建 package.json 文件</a></li><li class="sidebar-sub-header"><a href="/es/project.html#安装-gulp-作为开发时依赖项" class="sidebar-link" style="padding-left:3rem;">安装 gulp，作为开发时依赖项</a></li><li class="sidebar-sub-header"><a href="/es/project.html#创建-gulpfile-文件" class="sidebar-link" style="padding-left:3rem;">创建 gulpfile 文件</a></li><li class="sidebar-sub-header"><a href="/es/project.html#测试" class="sidebar-link" style="padding-left:3rem;">测试</a></li><li class="sidebar-sub-header"><a href="/es/project.html#gulp的组合任务" class="sidebar-link" style="padding-left:3rem;">gulp的组合任务</a></li><li class="sidebar-sub-header"><a href="/es/project.html#测试-2" class="sidebar-link" style="padding-left:3rem;">测试</a></li><li class="sidebar-sub-header"><a href="/es/project.html#gulp的异步任务" class="sidebar-link" style="padding-left:3rem;">gulp的异步任务</a></li><li class="sidebar-sub-header"><a href="/es/project.html#gulp的核心工作原理" class="sidebar-link">gulp的核心工作原理</a></li><li class="sidebar-sub-header"><a href="/es/project.html#gulp中关系文件的api" class="sidebar-link">gulp中关系文件的API</a></li><li class="sidebar-sub-header"><a href="/es/project.html#fis-fis3" class="sidebar-link" style="padding-left:3rem;">fis(fis3)</a></li></ul></li></ul></li><li><a href="/es/gulp-demo.html" class="sidebar-link">使用gulp构建一个web项目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#使用gulp构建一个web项目" class="sidebar-link">使用gulp构建一个web项目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#安装gulp的依赖" class="sidebar-link" style="padding-left:3rem;">安装gulp的依赖</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#使用gulp-sass插件对样式文件做处理" class="sidebar-link" style="padding-left:3rem;">使用gulp-sass插件对样式文件做处理</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#配置gulpfile-js文件" class="sidebar-link" style="padding-left:3rem;">配置gulpfile.js文件</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#测试" class="sidebar-link" style="padding-left:3rem;">测试</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#使用gulp-babel转换es语法-安装依赖" class="sidebar-link" style="padding-left:3rem;">使用gulp-babel转换ES语法，安装依赖</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#在gulpfile-js中加入下面的内容" class="sidebar-link" style="padding-left:3rem;">在gulpfile.js中加入下面的内容</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#测试-2" class="sidebar-link" style="padding-left:3rem;">测试</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#使用gulp-swim处理html模版文件" class="sidebar-link" style="padding-left:3rem;">使用gulp-swim处理html模版文件</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#安装gulp-swim的依赖" class="sidebar-link" style="padding-left:3rem;">安装gulp-swim的依赖</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#修改gulpfile-js文件" class="sidebar-link" style="padding-left:3rem;">修改gulpfile.js文件</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#测试-3" class="sidebar-link" style="padding-left:3rem;">测试</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#让上面的三个任务同时执行" class="sidebar-link" style="padding-left:3rem;">让上面的三个任务同时执行</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#测试-4" class="sidebar-link" style="padding-left:3rem;">测试</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#处理图片和字体文件" class="sidebar-link" style="padding-left:3rem;">处理图片和字体文件</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#复制public下的文件" class="sidebar-link" style="padding-left:3rem;">复制public下的文件</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#清除dist目录下的文件" class="sidebar-link" style="padding-left:3rem;">清除dist目录下的文件</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#自动加载插件" class="sidebar-link" style="padding-left:3rem;">自动加载插件</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#构建一个开发服务器" class="sidebar-link" style="padding-left:3rem;">构建一个开发服务器</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#处理生产环境的路径问题" class="sidebar-link" style="padding-left:3rem;">处理生产环境的路径问题</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#删除gulpfile中不需要到处的任务" class="sidebar-link" style="padding-left:3rem;">删除gulpfile中不需要到处的任务</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#自动化工作流的复用" class="sidebar-link" style="padding-left:3rem;">自动化工作流的复用</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#工作流的封装" class="sidebar-link" style="padding-left:3rem;">工作流的封装</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#发布我们的包到npm" class="sidebar-link" style="padding-left:3rem;">发布我们的包到npm</a></li><li class="sidebar-sub-header"><a href="/es/gulp-demo.html#在项目中使用我们发布的包" class="sidebar-link" style="padding-left:3rem;">在项目中使用我们发布的包</a></li></ul></li></ul></li><li><a href="/es/this.html" class="sidebar-link">this 的指向</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/module.html" class="sidebar-link">模块化的发展历程</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/webpack.html" class="sidebar-link">webpack</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/webpack2.html" class="sidebar-link">使用webpack去增强开发体验</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/rollup.html" class="sidebar-link">rollup</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/ruler.html" aria-current="page" class="active sidebar-link">前端规范化</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/webpack-source.html" class="sidebar-link">webpack源码分析</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/webpack3.html" class="sidebar-link">webpack和tapable</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/webpack4.html" class="sidebar-link">webpack的打包入口</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/webpack5.html" class="sidebar-link">手写 webpack源码</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/webpack6.html" class="sidebar-link">webpack源码分析（二）</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/webpack7.html" class="sidebar-link">处理模块依赖</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/debound.html" class="sidebar-link">防抖和节流</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/vue_router.html" class="sidebar-link">VueRouter</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/vue-observer.html" class="sidebar-link">Vue.js响应式原理</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/virtual-dom.html" class="sidebar-link">虚拟dom</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/vuejs-source.html" class="sidebar-link">Vue 源码解析 响应式原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#课程目标" class="sidebar-link">课程目标</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#准备工作" class="sidebar-link">准备工作</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#源码目录结构" class="sidebar-link">源码目录结构</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#了解-flow" class="sidebar-link">了解 Flow</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#调试设置" class="sidebar-link">调试设置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#打包" class="sidebar-link" style="padding-left:3rem;">打包</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#调试" class="sidebar-link" style="padding-left:3rem;">调试</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#vue-的不同构建版本" class="sidebar-link">Vue 的不同构建版本</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#术语" class="sidebar-link" style="padding-left:3rem;">术语</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#runtime-compiler-vs-runtime-only" class="sidebar-link">Runtime + Compiler vs. Runtime-only</a></li></ul></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#寻找入口文件" class="sidebar-link">寻找入口文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#执行构建" class="sidebar-link">执行构建</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#结果" class="sidebar-link">结果</a></li></ul></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#从入口开始" class="sidebar-link">从入口开始</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#通过查看源码解决下面问题" class="sidebar-link">通过查看源码解决下面问题</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#vue-的构造函数在哪里" class="sidebar-link">Vue 的构造函数在哪里</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#四个导出-vue-的模块" class="sidebar-link">四个导出 Vue 的模块</a></li></ul></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#vue-的初始化" class="sidebar-link">Vue 的初始化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#src-core-global-api-index-js" class="sidebar-link">src/core/global-api/index.js</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#src-core-instance-index-js" class="sidebar-link">src/core/instance/index.js</a></li></ul></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#首次渲染过程" class="sidebar-link">首次渲染过程</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#数据响应式原理" class="sidebar-link">数据响应式原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#通过查看源码解决下面问题-2" class="sidebar-link">通过查看源码解决下面问题</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#响应式处理的入口" class="sidebar-link">响应式处理的入口</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#observer" class="sidebar-link">Observer</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#definereactive" class="sidebar-link">defineReactive()</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#对象响应式处理" class="sidebar-link" style="padding-left:3rem;">对象响应式处理</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#数组的响应式处理" class="sidebar-link" style="padding-left:3rem;">数组的响应式处理</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#dep-类" class="sidebar-link">Dep 类</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#watcher-类" class="sidebar-link">Watcher 类</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#调试响应式数据执行过程" class="sidebar-link">调试响应式数据执行过程</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#回答以下问题" class="sidebar-link">回答以下问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#实例方法-数据" class="sidebar-link">实例方法/数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#vm-set" class="sidebar-link">vm.\$set</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#定义位置" class="sidebar-link" style="padding-left:3rem;">定义位置</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#源码" class="sidebar-link" style="padding-left:3rem;">源码</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#调试-2" class="sidebar-link" style="padding-left:3rem;">调试</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#vm-delete" class="sidebar-link">vm.\$delete</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#定义位置-2" class="sidebar-link" style="padding-left:3rem;">定义位置</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#源码-2" class="sidebar-link" style="padding-left:3rem;">源码</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#vm-watch" class="sidebar-link">vm.\$watch</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#三种类型的-watcher-对象" class="sidebar-link" style="padding-left:3rem;">三种类型的 Watcher 对象</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#源码-3" class="sidebar-link" style="padding-left:3rem;">源码</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#调试-3" class="sidebar-link" style="padding-left:3rem;">调试</a></li></ul></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#异步更新队列-nexttick" class="sidebar-link">异步更新队列-nextTick()</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#vm-nexttick-代码演示" class="sidebar-link">vm.\$nextTick() 代码演示</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#定义位置-3" class="sidebar-link">定义位置</a></li><li class="sidebar-sub-header"><a href="/es/vuejs-source.html#源码-4" class="sidebar-link">源码</a></li></ul></li></ul></li><li><a href="/es/bind.html" class="sidebar-link">Function.prototype.bind()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/es/circleDep.html" class="sidebar-link">循环依赖</a><ul class="sidebar-sub-headers"></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h4 id="前端规范化"><a href="#前端规范化" class="header-anchor">#</a> 前端规范化</h4> <p>项目的开发往往是一个团队协作的过程，项目中的每个开发人员可能都有自己的编码喜好和个人习惯，但是这样子会增加项目的维护成本，降低代码的质量，所以每个团队都需要一套明确统一的开发规范。</p> <h4 id="那些地方需要规范化"><a href="#那些地方需要规范化" class="header-anchor">#</a> 那些地方需要规范化</h4> <ul><li>代码、开发文档甚至是提交的日志</li> <li>开发过程中人为编写的成果物</li> <li>其中代码的规范化最为重要</li></ul> <h4 id="实施规范化的方法"><a href="#实施规范化的方法" class="header-anchor">#</a> 实施规范化的方法</h4> <ul><li>编写代码前人为的标准约定</li> <li>通过工具实现<code>lint</code></li></ul> <h4 id="常用的规范化实现方式"><a href="#常用的规范化实现方式" class="header-anchor">#</a> 常用的规范化实现方式</h4> <ul><li><code>ESLint</code>工具的使用</li> <li>定制<code>ESLint</code>的检验规则</li> <li><code>ESLint</code>对<code>TypeScript</code>的支持</li> <li><code>ESlint</code>结合自动化工具或<code>webpack</code></li> <li>基于<code>ESLint</code>的衍生工具</li> <li><code>StyleLint</code>的使用</li></ul> <h4 id="eslint介绍"><a href="#eslint介绍" class="header-anchor">#</a> ESLint介绍</h4> <ul><li><code>ESLint</code>是目前最为主流的<code>JavaScript Lint</code>工具</li> <li><code>ESLint</code>可以监测代码的质量</li> <li><code>ESLint</code>很容易统一开发者的编程风格</li> <li><code>ESLint</code>可以提升开发者的编程能力</li></ul> <h4 id="eslint安装"><a href="#eslint安装" class="header-anchor">#</a> <code>ESLint</code>安装</h4> <ul><li>首先初始化项目</li> <li>安装<code>ESLint</code>作为开发依赖：<code>yarn add eslint --dev</code></li> <li>通过cli命令验证安装结果：<code>yarn eslint --version</code></li></ul> <h4 id="eslint的具体使用"><a href="#eslint的具体使用" class="header-anchor">#</a> ESLint的具体使用</h4> <p>在项目中安装<code>ESLint</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> eslint --dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>初始化配置文件：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> eslint --init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>对问题代码进行检测：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> eslint ./index.js
<span class="token comment"># 自动修复代码的风格</span>
<span class="token function">yarn</span> eslint ./index.js --fix
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="eslint的配置文件解析"><a href="#eslint的配置文件解析" class="header-anchor">#</a> ESLint的配置文件解析</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  env<span class="token operator">:</span> <span class="token punctuation">{</span>
    browser<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    es6<span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'standard'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    ecmaVersion<span class="token operator">:</span> <span class="token number">2015</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'no-alert'</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  globals<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;jQuery&quot;</span><span class="token operator">:</span> <span class="token string">&quot;readonly&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>首先是<code>env</code>，这个配置项决定了我们代码的监测环境，可以为：</p> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code>An environment provides predefined global variables. The available environments are:

browser - browser global variables.
node - Node.js global variables and Node.js scoping.
commonjs - CommonJS global variables and CommonJS scoping (use this for browser-only code that uses Browserify/WebPack).
shared-node-browser - Globals common to both Node.js and Browser.
es6 - enable all ECMAScript 6 features except for modules (this automatically sets the ecmaVersion parser option to 6).
es2017 - adds all ECMAScript 2017 globals and automatically sets the ecmaVersion parser option to 8.
es2020 - adds all ECMAScript 2020 globals and automatically sets the ecmaVersion parser option to 11.
es2021 - adds all ECMAScript 2021 globals and automatically sets the ecmaVersion parser option to 12.
worker - web workers global variables.
amd - defines require() and define() as global variables as per the amd spec.
mocha - adds all of the Mocha testing global variables.
jasmine - adds all of the Jasmine testing global variables for version 1.3 and 2.0.
jest - Jest global variables.
phantomjs - PhantomJS global variables.
protractor - Protractor global variables.
qunit - QUnit global variables.
jquery - jQuery global variables.
prototypejs - Prototype.js global variables.
shelljs - ShellJS global variables.
meteor - Meteor global variables.
mongo - MongoDB global variables.
applescript - AppleScript global variables.
nashorn - Java 8 Nashorn global variables.
serviceworker - Service Worker global variables.
atomtest - Atom test helper globals.
embertest - Ember test helper globals.
webextensions - WebExtensions globals.
greasemonkey - GreaseMonkey globals.
These environments are not mutually exclusive, so you can define more than one at a time.

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>不同的环境为我们提供了不同全局变量，当我们修改配置为：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> env<span class="token operator">:</span> <span class="token punctuation">{</span>
    browser<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    es6<span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后被检测的代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'ele'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>正常来说当我们设置了这个配置项<code>browser: false,</code>，像<code>window，document</code>这种全局变量应该不能再使用了，但是我们执行<code>eslint</code>的监测，发现正常运行：这是因为我们使用<code>eslint-plugin-standard</code>中的配置:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// eslint-plugin-standard </span>
  <span class="token string">&quot;globals&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;document&quot;</span><span class="token operator">:</span> <span class="token string">&quot;readonly&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;navigator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;readonly&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;window&quot;</span><span class="token operator">:</span> <span class="token string">&quot;readonly&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>所以这些全局变量可以通过<code>lint</code>而不会报错。</p> <p><code>extend</code>指定我们<code>eslint</code>使用插件并使用插件提供的公共配置项，可以指定多个，这块我们只使用了<code>eslint-plugin-standard</code>.</p> <p><code>parserOptions</code>指定的是语法检测的版本：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    ecmaVersion<span class="token operator">:</span> <span class="token number">2015</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>我们将配置文件修改成：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	env<span class="token operator">:</span> <span class="token punctuation">{</span>
		browser<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		es6<span class="token operator">:</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'standard'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
		ecmaVersion<span class="token operator">:</span> <span class="token number">5</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	rules<span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">'no-alert'</span><span class="token operator">:</span> <span class="token string">'error'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	globals<span class="token operator">:</span> <span class="token punctuation">{</span>
		jQuery<span class="token operator">:</span> <span class="token string">'readonly'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>监测的代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">100</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>执行<code>eslint</code>:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ npx eslint 02-configuration.js

/Users/lijunjie/js-code/eslint-demo/03-eslint-configurations/02-configuration.js
  <span class="token number">0</span>:0  error  Parsing error: sourceType <span class="token string">'module'</span> is not supported when ecmaVersion <span class="token operator">&lt;</span> <span class="token number">2015</span>. Consider adding <span class="token variable"><span class="token variable">`</span><span class="token punctuation">{</span> ecmaVersion: <span class="token number">2015</span> <span class="token punctuation">}</span><span class="token variable">`</span></span> to the parser options
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>原因是<code>eslint-plugin-standard</code>的<code>sourceType: 'module'</code>,而<code>ES5</code>并不支持这个语法特性：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">&quot;parserOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;ecmaVersion&quot;</span><span class="token operator">:</span> <span class="token number">2020</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ecmaFeatures&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;sourceType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>我们在我们的配置文件中将<code>sourceType修改成'script'</code>:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	env<span class="token operator">:</span> <span class="token punctuation">{</span>
		browser<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		es6<span class="token operator">:</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'standard'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
		ecmaVersion<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
		sourceType<span class="token operator">:</span> <span class="token string">'script'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	rules<span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">'no-alert'</span><span class="token operator">:</span> <span class="token string">'error'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	globals<span class="token operator">:</span> <span class="token punctuation">{</span>
		jQuery<span class="token operator">:</span> <span class="token string">'readonly'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ npx eslint 02-configuration.js

/Users/lijunjie/js-code/eslint-demo/03-eslint-configurations/02-configuration.js
  <span class="token number">1</span>:1  error  Parsing error: The keyword <span class="token string">'const'</span> is reserved

✖ <span class="token number">1</span> problem <span class="token punctuation">(</span><span class="token number">1</span> error, <span class="token number">0</span> warnings<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>而我们修改配置项为<code>ecmaVersion:2015</code>的时候再次执行：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ npx eslint 02-configuration.js

/Users/lijunjie/js-code/eslint-demo/03-eslint-configurations/02-configuration.js
  <span class="token number">1</span>:7  error  <span class="token string">'a'</span> is assigned a value but never used  no-unused-vars
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这个是因我们变量为使用的缘故，而语法检测已经通过了。当我们在代码中使用<code>Promise</code>时还会报错：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> foo2 <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ npx eslint 02-configuration.js

/Users/lijunjie/js-code/eslint-demo/03-eslint-configurations/02-configuration.js
  <span class="token number">1</span>:5   error  <span class="token string">'foo2'</span> is assigned a value but never used        no-unused-vars
  <span class="token number">1</span>:5   error  <span class="token string">'foo2'</span> is never reassigned. Use <span class="token string">'const'</span> instead  prefer-const
  <span class="token number">2</span>:5   error  <span class="token string">'a'</span> is assigned a value but never used           no-unused-vars
  <span class="token number">2</span>:5   error  <span class="token string">'a'</span> is never reassigned. Use <span class="token string">'const'</span> instead     prefer-const
  <span class="token number">2</span>:13  error  <span class="token string">'Promise'</span> is not defined                         no-undef

✖ <span class="token number">5</span> problems <span class="token punctuation">(</span><span class="token number">5</span> errors, <span class="token number">0</span> warnings<span class="token punctuation">)</span>
  <span class="token number">2</span> errors and <span class="token number">0</span> warnings potentially fixable with the <span class="token variable"><span class="token variable">`</span>--fix<span class="token variable">`</span></span> option.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>原因在于：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>or <span class="token constant">ES6</span> syntax<span class="token punctuation">,</span> use <span class="token punctuation">{</span> <span class="token string">&quot;parserOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;ecmaVersion&quot;</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token keyword">for</span> <span class="token keyword">new</span> <span class="token class-name">ES6</span> global variables<span class="token punctuation">,</span> use <span class="token punctuation">{</span> <span class="token string">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;es6&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">.</span> <span class="token punctuation">{</span> <span class="token string">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;es6&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> enables <span class="token constant">ES6</span> syntax automatically<span class="token punctuation">,</span> but <span class="token punctuation">{</span> <span class="token string">&quot;parserOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;ecmaVersion&quot;</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> does not enable <span class="token constant">ES6</span> globals automatically<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>所以我们需要设置：<code>{ &quot;env&quot;: { &quot;es6&quot;: true } }</code>,<code>Promise</code>不会报出为定义的错误了。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ npx eslint 02-configuration.js

/Users/lijunjie/js-code/eslint-demo/03-eslint-configurations/02-configuration.js
  <span class="token number">1</span>:5  error  <span class="token string">'foo2'</span> is assigned a value but never used        no-unused-vars
  <span class="token number">1</span>:5  error  <span class="token string">'foo2'</span> is never reassigned. Use <span class="token string">'const'</span> instead  prefer-const
  <span class="token number">2</span>:5  error  <span class="token string">'a'</span> is assigned a value but never used           no-unused-vars
  <span class="token number">2</span>:5  error  <span class="token string">'a'</span> is never reassigned. Use <span class="token string">'const'</span> instead     prefer-const

✖ <span class="token number">4</span> problems <span class="token punctuation">(</span><span class="token number">4</span> errors, <span class="token number">0</span> warnings<span class="token punctuation">)</span>
  <span class="token number">2</span> errors and <span class="token number">0</span> warnings potentially fixable with the <span class="token variable"><span class="token variable">`</span>--fix<span class="token variable">`</span></span> option.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>ruler</code>执行我们自定义的规则：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>rules<span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">'no-alert'</span><span class="token operator">:</span> <span class="token string">'error'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面的<code>no-alert</code>可以有三种取值：<code>off,error,warn</code>，分别对应的是:关闭，报错，警告。</p> <p><code>globals</code>可以指定一些全局变量，如我们项目中使用了<code>jQuery</code>，我们就可以这么设置：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>globals: {
		jQuery: 'readonly'
	}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这样子我们代码中使用<code>jQuery</code>就不会报错。</p> <h4 id="eslint-配置注释"><a href="#eslint-配置注释" class="header-anchor">#</a> ESLint 配置注释</h4> <p>我们代码中有时候可能存在一些违反规则的地方，我们不能为了这几行代码推翻这些规则，更好的做法是使用<code>ESlint</code>的注释让这些代码绕过检测：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str1 <span class="token operator">=</span> <span class="token string">&quot;${name} is a coder&quot;</span> 

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>执行<code>ESLint</code>:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ npx eslint ./eslint-configuration-comments.js

/Users/lijunjie/js-code/eslint-demo/04-eslint-configuration-comments/eslint-configuration-comments.js
  <span class="token number">1</span>:14  error  Unexpected template string expression  no-template-curly-in-string

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果我们真的需要这样使用，我们可以使用注释对该行绕过检测：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str1 <span class="token operator">=</span> <span class="token string">'${name} is a coder'</span> <span class="token comment">// eslint-disable-line</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>或者只是绕过某个规则：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str1 <span class="token operator">=</span> <span class="token string">'${name} is a coder'</span> <span class="token comment">// eslint-disable-line no-template-curly-in-string</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="eslint和自动化工具的集成"><a href="#eslint和自动化工具的集成" class="header-anchor">#</a> ESLint和自动化工具的集成</h4> <p>将<code>ESLint</code>和自动化构建工具集成起来，主要有两个好处：</p> <ul><li>保证<code>ESLint</code>一定会执行</li> <li>与项目统一，更加好管理</li></ul> <p>我们选择在<code>gulp</code>构建的项目(https://github.com/zce/zce-gulp-demo)中集成<code>ESLint</code>，所以前置工具需要一个<code>gulp</code>项目，然后安装<code>ESlint</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> eslint --dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装<code>gulp-eslint</code>插件：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> gulp-eslint --dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在<code>gulpfile.js</code>中加入对<code>gulp-eslint</code>的使用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token operator">...</span>

<span class="token keyword">const</span> <span class="token function-variable function">script</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
		<span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'src/assets/scripts/*.js'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> base<span class="token operator">:</span> <span class="token string">'src'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">eslint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token comment">// eslint.format() outputs the lint results to the console.</span>
			<span class="token comment">// Alternatively use eslint.formatEach() (see Docs).</span>
			<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>eslint<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token comment">// To have the process exit with an error code (1) on</span>
			<span class="token comment">// lint error, return the stream and pipe to failAfterError last.</span>
			<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>eslint<span class="token punctuation">.</span><span class="token function">failAfterError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>plugins<span class="token punctuation">.</span><span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span> presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'temp'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>bs<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">{</span> stream<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token keyword">const</span> compile <span class="token operator">=</span> <span class="token function">parallel</span><span class="token punctuation">(</span>style<span class="token punctuation">,</span> script<span class="token punctuation">,</span> page<span class="token punctuation">)</span>

<span class="token comment">// 上线之前执行的任务</span>
<span class="token keyword">const</span> build <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>clean<span class="token punctuation">,</span> <span class="token function">parallel</span><span class="token punctuation">(</span><span class="token function">series</span><span class="token punctuation">(</span>compile<span class="token punctuation">,</span> useref<span class="token punctuation">)</span><span class="token punctuation">,</span> image<span class="token punctuation">,</span> font<span class="token punctuation">,</span> extra<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> develop <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>compile<span class="token punctuation">,</span> serve<span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	clean<span class="token punctuation">,</span>
	build<span class="token punctuation">,</span>
	develop
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>执行对应的构建任务,发现缺少<code>ESLint</code>的配置文件：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ yarn gulp develop  
yarn run v1.22.10
warning ../../../package.json: No license field
$ /Users/lijunjie/js-code/eslint-demo/06-eslint-gulp/zce-gulp-demo/node_modules/.bin/gulp develop
[21:32:51] Using gulpfile ~/js-code/eslint-demo/06-eslint-gulp/zce-gulp-demo/gulpfile.js
[21:32:51] Starting 'develop'...
[21:32:51] Starting 'style'...
[21:32:51] Starting 'script'...
[21:32:51] Starting 'page'...
[21:32:52] 'script' errored after 203 ms
[21:32:52] Error: No ESLint conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>创建一个<code>ESLint</code>的配置文件：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ npx gulp develop   
<span class="token punctuation">[</span><span class="token number">22</span>:01:20<span class="token punctuation">]</span> Using gulpfile ~/js-code/eslint-demo/06-eslint-gulp/zce-gulp-demo/gulpfile.js
<span class="token punctuation">[</span><span class="token number">22</span>:01:20<span class="token punctuation">]</span> Starting <span class="token string">'develop'</span><span class="token punctuation">..</span>.
<span class="token punctuation">[</span><span class="token number">22</span>:01:20<span class="token punctuation">]</span> Starting <span class="token string">'style'</span><span class="token punctuation">..</span>.
<span class="token punctuation">[</span><span class="token number">22</span>:01:20<span class="token punctuation">]</span> Starting <span class="token string">'script'</span><span class="token punctuation">..</span>.
<span class="token punctuation">[</span><span class="token number">22</span>:01:20<span class="token punctuation">]</span> Starting <span class="token string">'page'</span><span class="token punctuation">..</span>.
<span class="token punctuation">[</span><span class="token number">22</span>:01:21<span class="token punctuation">]</span> 
/Users/lijunjie/js-code/eslint-demo/06-eslint-gulp/zce-gulp-demo/src/assets/scripts/main.js
  <span class="token number">3</span>:1  error  <span class="token string">'$'</span> is not defined  no-undef

✖ <span class="token number">1</span> problem <span class="token punctuation">(</span><span class="token number">1</span> error, <span class="token number">0</span> warnings<span class="token punctuation">)</span>

<span class="token punctuation">[</span><span class="token number">22</span>:01:21<span class="token punctuation">]</span> <span class="token string">'script'</span> errored after <span class="token number">979</span> ms
<span class="token punctuation">[</span><span class="token number">22</span>:01:21<span class="token punctuation">]</span> ESLintError <span class="token keyword">in</span> plugin <span class="token string">&quot;gulp-eslint&quot;</span>
Message:
    Failed with <span class="token number">1</span> error
Details:
    domainEmitter: <span class="token punctuation">[</span>object Object<span class="token punctuation">]</span>
    domainThrown: <span class="token boolean">false</span>

<span class="token punctuation">[</span><span class="token number">22</span>:01:21<span class="token punctuation">]</span> <span class="token string">'develop'</span> errored after <span class="token number">981</span> ms
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>上面检查出来<code>error '$' is not defined no-undef</code>,这里我们只需要将<code>$</code>放进全局变量中即可：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	env<span class="token operator">:</span> <span class="token punctuation">{</span>
		browser<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		es2020<span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'standard'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
		ecmaVersion<span class="token operator">:</span> <span class="token number">11</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	rules<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	globals<span class="token operator">:</span> <span class="token punctuation">{</span>
		$<span class="token operator">:</span> <span class="token string">'readonly'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="eslint配合webpack"><a href="#eslint配合webpack" class="header-anchor">#</a> ESLint配合webpack</h4> <p>准备一个<code>webpack</code>构建的项目（https://github.com/zce/zce-react-app），然后安装<code>eslint</code>:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> eslint --dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装<code>eslint-loader</code>:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> eslint-loader --dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>初始化<code>eslint</code>的配置文件：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> eslint --init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装其他的依赖：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>webpack.config.js</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> 
        exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> 
        use<span class="token operator">:</span> <span class="token string">'babel-loader'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> 
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">'src/index.html'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>我们需要使用<code>ESlint</code>去校验源代码，所以我们需要添加<code>eslint-loader</code>在<code>babel-loader</code>之前，有两种方法可以实现：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	<span class="token punctuation">{</span>
				test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'babel-loader'</span><span class="token punctuation">,</span> <span class="token string">'eslint-loader'</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>或者：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>		<span class="token punctuation">{</span>
				test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				use<span class="token operator">:</span> <span class="token string">'babel-loader'</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">{</span>
				test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				use<span class="token operator">:</span> <span class="token string">'eslint-loader'</span><span class="token punctuation">,</span>
				enforce<span class="token operator">:</span> <span class="token string">'pre'</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>配置完成后启动项目：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> run dev
<span class="token punctuation">..</span>.
ERROR <span class="token keyword">in</span> ./src/components/App.js
Module Error <span class="token punctuation">(</span>from ./node_modules/eslint-loader/dist/cjs.js<span class="token punctuation">)</span>:

/Users/lijunjie/js-code/eslint-demo/07-eslint-webpack/zce-react-app/src/components/App.js
  <span class="token number">1</span>:8   error  <span class="token string">'React'</span> is defined but never used          no-unused-vars
  <span class="token number">4</span>:28  error  Missing space before <span class="token keyword">function</span> parentheses  space-before-function-paren

✖ <span class="token number">2</span> problems <span class="token punctuation">(</span><span class="token number">2</span> errors, <span class="token number">0</span> warnings<span class="token punctuation">)</span>
  <span class="token number">1</span> error and <span class="token number">0</span> warnings potentially fixable with the <span class="token variable"><span class="token variable">`</span>--fix<span class="token variable">`</span></span> option.

 @ ./src/main.js <span class="token number">4</span>:0-35 <span class="token number">5</span>:107-110

ERROR <span class="token keyword">in</span> ./src/main.js
Module Error <span class="token punctuation">(</span>from ./node_modules/eslint-loader/dist/cjs.js<span class="token punctuation">)</span>:

/Users/lijunjie/js-code/eslint-demo/07-eslint-webpack/zce-react-app/src/main.js
  <span class="token number">1</span>:8  error  <span class="token string">'React'</span> is defined but never used  no-unused-vars
  <span class="token number">4</span>:8  error  <span class="token string">'App'</span> is defined but never used    no-unused-vars

✖ <span class="token number">2</span> problems <span class="token punctuation">(</span><span class="token number">2</span> errors, <span class="token number">0</span> warnings<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>可以看到错误，由于这是一个<code>React</code>项目：</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span>
<span class="token keyword">import</span> <span class="token string">'./global.css'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./components/App'</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">React.StrictMode</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">React.StrictMode</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>里面的<code>React</code>是必须要导入的。针对这个问题，<code>ESLint</code>提供了一个插件：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> eslint-plugin-react --dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这个插件里面提供了很多校验规则供我们使用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> allRules <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'boolean-prop-naming'</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./lib/rules/boolean-prop-naming'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'button-has-type'</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./lib/rules/button-has-type'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'default-props-match-prop-types'</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./lib/rules/default-props-match-prop-types'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'destructuring-assignment'</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./lib/rules/destructuring-assignment'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'display-name'</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./lib/rules/display-name'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'forbid-component-props'</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./lib/rules/forbid-component-props'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>接下来我们在<code>ESLint</code>中引入这个插件并使用校验规则：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// eslintrc.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	env<span class="token operator">:</span> <span class="token punctuation">{</span>
		browser<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		es2021<span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'standard'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
		ecmaVersion<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
		sourceType<span class="token operator">:</span> <span class="token string">'module'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	rules<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 2 === error, 这个配置项是忽律对React为使用的校验的</span>
        <span class="token string">'jsx-uses-react'</span><span class="token operator">:</span><span class="token number">2</span>
        <span class="token comment">// App 为使用</span>
        <span class="token string">'jsx-uses-vars'</span><span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 插件中可以省略前缀`eslint-plugin-`</span>
	plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>对于大多数的<code>ESlint</code>插件，都会提供一个共享的配置来降低我们使用的成本，所以我们还可以这么使用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// eslintrc.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	env<span class="token operator">:</span> <span class="token punctuation">{</span>
		browser<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		es2021<span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'standard'</span><span class="token punctuation">,</span> <span class="token string">'plugin:react/recommended'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
		ecmaVersion<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
		sourceType<span class="token operator">:</span> <span class="token string">'module'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="现代化项目中集成eslint"><a href="#现代化项目中集成eslint" class="header-anchor">#</a> 现代化项目中集成<code>ESlint</code></h4> <p>现在的很多框架的脚手架中都有对<code>ESlint</code>的集成选项，我们可以使用脚手架很方便的生成对项目中<code>ESLint</code>的配置,如使用<code>vue-cli</code>生成一个<code>Vue项目</code>：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>vue create eslint-vue
? Please pick a preset: Manually <span class="token keyword">select</span> features
? Check the features needed <span class="token keyword">for</span> your project: Choose Vue version, Babel, Linter
? Choose a version of Vue.js that you want to start the project with <span class="token number">2</span>.x
? Pick a linter / formatter config: Standard
? Pick additional lint features: Lint on save, Lint and fix on commit
? Where <span class="token keyword">do</span> you prefer placing config <span class="token keyword">for</span> Babel, ESLint, etc.? In dedicated config files
? Save this as a preset <span class="token keyword">for</span> future projects? <span class="token punctuation">(</span>y/N<span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="eslint校验typescript"><a href="#eslint校验typescript" class="header-anchor">#</a> ESLint校验TypeScript</h4> <p><code>ESLint</code>支持对<code>TypeScript</code>的校验，在一个<code>TypeScript</code>项目中使用<code>ESlint</code>去生成一个配置文件:(需要提前安装<code>TypeScript</code>)</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> -D eslint
npx eslint --init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>生成的<code>eslint</code>配置文件：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  env<span class="token operator">:</span> <span class="token punctuation">{</span>
    browser<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    es2021<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'standard'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  parser<span class="token operator">:</span> <span class="token string">'@typescript-eslint/parser'</span><span class="token punctuation">,</span>
  parserOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    ecmaVersion<span class="token operator">:</span> <span class="token number">12</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'@typescript-eslint'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><code>parser</code>选项用来制定一个语法解析器,然后我们使用执行对<code>TypeScript</code>的校验：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ npx eslint ./index.ts 

/Users/lijunjie/js-code/eslint-demo/eslint-typescript/index.ts
  <span class="token number">1</span>:13  error  Missing space before <span class="token keyword">function</span> parentheses      space-before-function-paren
  <span class="token number">1</span>:31  error  Missing space before opening brace             space-before-blocks
  <span class="token number">2</span>:15  error  <span class="token string">'msg'</span> is not defined                           no-undef
  <span class="token number">2</span>:19  error  Extra semicolon                                semi
  <span class="token number">2</span>:20  error  Block must not be padded by blank lines        padded-blocks
  <span class="token number">3</span>:1   error  Trailing spaces not allowed                    no-trailing-spaces
  <span class="token number">6</span>:5   error  Strings must use singlequote                   quotes
  <span class="token number">6</span>:25  error  Newline required at end of <span class="token function">file</span> but not found  eol-last

✖ <span class="token number">8</span> problems <span class="token punctuation">(</span><span class="token number">8</span> errors, <span class="token number">0</span> warnings<span class="token punctuation">)</span>
  <span class="token number">7</span> errors and <span class="token number">0</span> warnings potentially fixable with the <span class="token variable"><span class="token variable">`</span>--fix<span class="token variable">`</span></span> option.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="stylelint的使用介绍"><a href="#stylelint的使用介绍" class="header-anchor">#</a> StyleLint的使用介绍</h4> <ul><li>提供了默认的代码检查规则</li> <li>提供了<code>cli</code>程序,快速调用</li> <li>通过插件支持<code>Sass</code>、<code>Less</code>、<code>postCss</code></li> <li>支持<code>gulp</code>和<code>webpack</code>的集成</li></ul> <p>使用上基本可以参考<code>eslint</code>.首先我们在需要使用的项目中安装<code>stylelint</code>作为开发依赖：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> -D stylelint
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>手动创建一个<code>styleLint</code>的配置文件：<code>stylelintrc.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'stylelint-config-standard'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>stylelint-config-standard</code>一个关于<code>stylelint</code>的共享配置插件：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> -D stylelint-config-standard
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后执行对<code>css</code>文件的检验：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ npx stylelint style.css 

style.css
 <span class="token number">5</span>:1  ✖  Expected empty line before rule   rule-empty-line-before
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如果需要对<code>sass</code>文件进行校验，需要安装对应的插件：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> -D stylelint-config-sass-guidelines
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后将这个插件添加到配置文件中：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>module.exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	extends: <span class="token punctuation">[</span><span class="token string">'stylelint-config-standard'</span>, <span class="token string">'stylelint-config-sass-guidelines'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>执行对<code>sass</code>文件的校验：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ npx stylelint ./style.scss                     

style.scss
 <span class="token number">11</span>:1  ✖  Unexpected missing end-of-source newline   no-missing-end-of-source-newline

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>stylelint</code>也可以和<code>gulp</code>或<code>webpack</code>集成，具体参照<code>eslint</code>.</p> <h4 id="prettier格式化代码"><a href="#prettier格式化代码" class="header-anchor">#</a> prettier格式化代码</h4> <p><code>Prettier</code>是一个前端非常流行的代码格式化工具，几乎可以用来格式化我们前端遇到的各种类型的代码，使用起来也是非常的简单：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> -D prettier
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>prettier</code>可以不用配置文件直接使用(推荐配置自己的规则)：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ npx prettier style.css 
body <span class="token punctuation">{</span>
  background-color: <span class="token comment">#f4f6fb;</span>
  color: <span class="token comment">#23262b;</span>
<span class="token punctuation">}</span>
header <span class="token punctuation">{</span>
  height: 100px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>prettier</code>将格式化后的代码输出到了控制台，如果需要覆盖原来的文件，可以使用</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ npx prettier style.css -w
style.css 32ms
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>可以指定一个目录一次格式化多个文件：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ npx prettier <span class="token builtin class-name">.</span> -w        
app.vue 77ms
index.html 36ms
package-lock.json 4ms
package.json 3ms
react.jsx 10ms
readme.md 23ms
script.js 6ms
style.css 7ms
style.scss 5ms
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="git-hooks"><a href="#git-hooks" class="header-anchor">#</a> git hooks</h4> <p><code>git hooks</code>指的是git的钩子，每个钩子都对应一个任务。可以通过<code>shell</code>脚本来指定任务的具体操作。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># lijunjie @ 192 in ~/js-code/.git/hooks on git:master o [22:04:48] </span>
$ <span class="token function">ls</span>
applypatch-msg            post-merge                pre-commit                pre-receive
applypatch-msg.sample     post-receive              pre-commit.sample         pre-receive.sample
commit-msg                post-rewrite              pre-merge-commit          prepare-commit-msg
commit-msg.sample         post-update               pre-merge-commit.sample   prepare-commit-msg.sample
fsmonitor-watchman.sample post-update.sample        pre-push                  push-to-checkout
post-applypatch           pre-applypatch            pre-push.sample           sendemail-validate
post-checkout             pre-applypatch.sample     pre-rebase                update
post-commit               pre-auto-gc               pre-rebase.sample         update.sample
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>上面提供了一些<code>git hook</code>的例子，如果我们需要代码提交前触发，可以使用<code>pre-commit钩子</code>：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/sh</span>
<span class="token comment"># husky</span>

<span class="token comment"># Hook created by Husky</span>
<span class="token comment">#   Version: 3.1.0</span>
<span class="token comment">#   At: 2021-2-16 20:43:23</span>
<span class="token comment">#   See: https://github.com/typicode/husky#readme</span>

<span class="token comment"># From</span>
<span class="token comment">#   Directory: /Users/lijunjie/js-code/yeoman/node_sample/node_modules/husky</span>
<span class="token comment">#   Homepage: https://github.com/typicode/husky#readme</span>

<span class="token assign-left variable">scriptPath</span><span class="token operator">=</span><span class="token string">&quot;yeoman/node_sample/node_modules/husky/run.js&quot;</span>
<span class="token assign-left variable">hookName</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">basename</span> <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token variable">`</span></span>
<span class="token assign-left variable">gitParams</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$*</span>&quot;</span>

<span class="token function-name function">debug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${HUSKY_DEBUG}</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${HUSKY_DEBUG}</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;husky:debug <span class="token variable">$1</span>&quot;</span>
  <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

debug <span class="token string">&quot;husky v3.1.0 (created at 2021-2-16 20:43:23)&quot;</span>
debug <span class="token string">&quot;<span class="token variable">$hookName</span> hook started&quot;</span>
debug <span class="token string">&quot;Current working directory is '<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>'&quot;</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${HUSKY_SKIP_HOOKS}</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${HUSKY_SKIP_HOOKS}</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  debug <span class="token string">&quot;HUSKY_SKIP_HOOKS is set to <span class="token variable">${HUSKY_SKIP_HOOKS}</span>, skipping hook&quot;</span>
  <span class="token builtin class-name">exit</span> <span class="token number">0</span>
<span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${HUSKY_USE_YARN}</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${HUSKY_USE_YARN}</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  debug <span class="token string">&quot;Calling husky through Yarn&quot;</span>
  <span class="token function">yarn</span> husky-run <span class="token variable">$hookName</span> <span class="token string">&quot;<span class="token variable">$gitParams</span>&quot;</span>
<span class="token keyword">else</span>

  <span class="token keyword">if</span> <span class="token operator">!</span> <span class="token builtin class-name">command</span> -v node <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Info: can't find node in PATH, trying to find a node binary on your system&quot;</span>
  <span class="token keyword">fi</span>

  <span class="token keyword">if</span> <span class="token punctuation">[</span> -f <span class="token string">&quot;<span class="token variable">$scriptPath</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token comment"># if [ -t 1 ]; then</span>
    <span class="token comment">#   exec &lt; /dev/tty</span>
    <span class="token comment"># fi</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> -f ~/.huskyrc <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      debug <span class="token string">&quot;Sourcing '~/.huskyrc'&quot;</span>
      <span class="token builtin class-name">.</span> ~/.huskyrc
    <span class="token keyword">fi</span>
    yeoman/node_sample/node_modules/run-node/run-node <span class="token string">&quot;<span class="token variable">$scriptPath</span>&quot;</span> <span class="token variable">$hookName</span> <span class="token string">&quot;<span class="token variable">$gitParams</span>&quot;</span>
  <span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Can't find Husky, skipping <span class="token variable">$hookName</span> hook&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;You can reinstall it using 'npm install husky --save-dev' or delete this hook&quot;</span>
  <span class="token keyword">fi</span>
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h4 id="eslint结合git-hooks"><a href="#eslint结合git-hooks" class="header-anchor">#</a> <code>ESLint</code>结合<code>git hooks</code></h4> <p>我们希望在代码提交之前执行<code>ESLint</code>的操作，那么可以将<code>ESlint</code>和<code>git hooks</code>结合起来，对于大多数的程序员来说，并不熟悉<code>shell</code>脚本，所以产生了一些<code>npm</code>包可以帮我们集成这些功能：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> -D husky
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后修改我们的<code>package.json</code>文件：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;hooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string">&quot;pre-commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run lint&quot;</span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>那么当我们提交代码的时候就会自动去<code>lint</code>,但是如果我们需要再<code>lint</code>之后再去做一些事情(格式化代码并添加到<code>stage</code>),那么我们需要其他的<code>npm</code>模块：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> -D lint-staged 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>修改<code>package.json</code>文件：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	<span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string">&quot;preCommit&quot;</span><span class="token operator">:</span><span class="token string">&quot;lint-staged&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;hooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string">&quot;pre-commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run preCommit&quot;</span>
		<span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string">&quot;*.js&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token string">&quot;eslint&quot;</span><span class="token punctuation">,</span>
			<span class="token string">&quot;git add&quot;</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><code>husky</code> -&gt;<code>npm scripts</code> -&gt; <code>lint-staged</code> -&gt; <code>eslint</code>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/es/rollup.html" class="prev">
        rollup
      </a></span> <span class="next"><a href="/es/webpack-source.html">
        webpack源码分析
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9b56a05a.js" defer></script><script src="/assets/js/2.b22280cb.js" defer></script><script src="/assets/js/46.5a74f2cd.js" defer></script>
  </body>
</html>
