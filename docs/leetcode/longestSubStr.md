### æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²

## é¢˜ç›®æè¿°

```tiki wiki
//ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ æœ€é•¿å­ä¸² çš„é•¿åº¦ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1: 
//
// 
//è¾“å…¥: s = "abcabcbb"
//è¾“å‡º: 3 
//è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "abc"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚
// 
//
// ç¤ºä¾‹ 2: 
//
// 
//è¾“å…¥: s = "bbbbb"
//è¾“å‡º: 1
//è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "b"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚
// 
//
// ç¤ºä¾‹ 3: 
//
// 
//è¾“å…¥: s = "pwwkew"
//è¾“å‡º: 3
//è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "wke"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚
//     è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ"pwke" æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚
// 
//
// ç¤ºä¾‹ 4: 
//
// 
//è¾“å…¥: s = ""
//è¾“å‡º: 0
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 0 <= s.length <= 5 * 104 
// s ç”±è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ç¬¦å·å’Œç©ºæ ¼ç»„æˆ 
// 
// Related Topics å“ˆå¸Œè¡¨ åŒæŒ‡é’ˆ å­—ç¬¦ä¸² Sliding Window 
// ğŸ‘ 4728 ğŸ‘ 0
```

* æš´åŠ›è§£æ³•

> è§£é¢˜æ€è·¯ï¼šä½¿ç”¨åŒæŒ‡é’ˆå»æˆªå–å­—ç¬¦ä¸²ä¸²ä¸­æ‰€æœ‰å­—ä¸²å¹¶ä¿å­˜åˆ°ä¸€ä¸ªåˆ‡ç‰‡ä¸­ï¼Œç„¶åéå†åˆ‡ç‰‡å»è®¡ç®—å­—ä¸²çš„æœ€å¤§é•¿åº¦

```go
func lengthOfLongestSubstring(s string) int {
	// ç©ºå­—ç¬¦ä¸²
	length :=len(s)
	if length == 0{
		return 0
	}
	subStrs := make([]string,0)
	// å­—ç¬¦ä¸²å¯¹åº”çš„åˆ‡ç‰‡
	strSli := []byte(s)
	// å­—ç¬¦ä¸²çš„é•¿åº¦å¤§äº1
	for start:=0;start<length;start++{
		for end:=start+1;end<=length;end++{
			if subStr := string(strSli[start:end]);end == length || strings.Contains(subStr,string(s[end])){
				subStrs = append(subStrs,subStr)
				break
			}
		}
	}
	// è·å–å­—ä¸²çš„æœ€å¤§é•¿åº¦
	maxLen := 1
	for _,str := range subStrs{
		if length:=len(str);length>maxLen {
			maxLen = length
		}
	}
	return maxLen
}
```

	è§£ç­”æˆåŠŸ:
					æ‰§è¡Œè€—æ—¶:172 ms,å‡»è´¥äº†11.27% çš„Goç”¨æˆ·
					å†…å­˜æ¶ˆè€—:18.4 MB,å‡»è´¥äº†5.15% çš„Goç”¨æˆ·
> è¿™ç§æ–¹æ³•å°±æ˜¯åˆ—å‡ºå½“å‰å­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ä¸²ï¼Œæœ€é•¿çš„å¯èƒ½æ˜¯è‡ªå·±ï¼Œæœ€çŸ­çš„æ˜¯å•ä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œè®¡ç®—å‡ºæœ€å¤§é•¿åº¦ç„¶åè¿”å›ã€‚

	æ—¶é—´å¤æ‚åº¦ï¼šO(n^3) ,ä¸¤æ¬¡forå¾ªç¯ï¼Œè¿˜æœ‰æˆªå–å­ä¸²çš„æ“ä½œ
	ç©ºé—´å¤æ‚åº¦ï¼šO(n^2) ç©ºé—´å¤æ‚åº¦ä¸»è¦æ¥è‡ªå¯¹å­ä¸²çš„å­˜å‚¨ï¼Œå­ä¸²æœ€å¤šæœ‰n(n+1)/2ä¸ªï¼Œ eg:abcd æœ‰10ä¸ªè¿™ç§å­ä¸² 
	ç»¼ä¸Šå¯çŸ¥æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½æ¯”è¾ƒé«˜ã€‚
* ä¼˜åŒ–è§£æ³•

ç”±äºæˆ‘ä»¬éœ€è¦çš„æ˜¯æœ€é•¿å­ä¸²çš„é•¿åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å»ä½¿ç”¨ä¸€ä¸ªå˜é‡ä¿å­˜æœ€é•¿çš„å­ä¸²çš„é•¿åº¦ï¼Œå½“é•¿åº¦å¤§äºè¿™ä¸ªå€¼çš„æ—¶å€™æ›´æ–°ï¼Œä»è€Œä¸éœ€è¦å»ä¿å­˜å­ä¸²ï¼Œè¿™æ ·å­å¯ä»¥é™ä½æ‰€éœ€è¦çš„ç©ºé—´å¤æ‚åº¦ã€‚

```go
func lengthOfLongestSubstring(s string) int {
	// ç©ºå­—ç¬¦ä¸²
	length :=len(s)
	if length == 0{
		return 0
	}
	maxLen := 1
	// å­—ç¬¦ä¸²å¯¹åº”çš„åˆ‡ç‰‡
	strSli := []byte(s)
	// å­—ç¬¦ä¸²çš„é•¿åº¦å¤§äº1
	for start:=0;start<length;start++{
		for end:=start+1;end<=length;end++{
			if subStr := string(strSli[start:end]);end == length || strings.Contains(subStr,string(s[end])){
				if length:=len(subStr);length > maxLen {
					maxLen = length
				}
				break
			}
		}
	}
	return maxLen
}
```

```
è§£ç­”æˆåŠŸ:
					æ‰§è¡Œè€—æ—¶:124 ms,å‡»è´¥äº†11.86% çš„Goç”¨æˆ·
					å†…å­˜æ¶ˆè€—:6.8 MB,å‡»è´¥äº†11.00% çš„Goç”¨æˆ·
```

å¯ä»¥çœ‹åˆ°æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½æœ‰æé«˜ï¼Œæ—¶é—´å¤æ‚åº¦çš„æé«˜ä¸»è¦æ¥æºäºæˆ‘ä»¬ä¸éœ€è¦å»éå†ä¿å­˜å­ä¸²çš„åˆ‡ç‰‡ã€‚

```wiki
æ—¶é—´å¤æ‚åº¦ï¼šO(n^3),ä»£ç çš„ä¸­åŒé‡forå¾ªç¯å’Œæˆªå–å­ä¸²çš„æ“ä½œä¾ç„¶å­˜åœ¨ã€‚
ç©ºé—´å¤æ‚åº¦ï¼šO(n^2),ä»£ç ä¸­è¿˜æ˜¯éœ€è¦æˆªå–å­ä¸²ï¼Œæœ€å¤šå¯ä»¥æœ‰ä½ ä½ n(n+1)/2ä¸ªå­—ä¸²
```

* ä¼˜åŒ–è§£æ³•

> ä½¿ç”¨hashtableå’ŒåŒæŒ‡é’ˆå»éªŒè¯å­—ç¬¦æ˜¯å¦åœ¨å­ä¸²ä¸­é‡å¤,rightå’Œleftåˆ†åˆ«æŒ‡å‘å­—ç¬¦ä¸²çš„å¼€å§‹ï¼Œå½“æ—¶rightæŒ‡å‘çš„å­—ç¬¦ä¸åœ¨hash tableä¸­ï¼Œright++ï¼Œä¸”å°†å­—ç¬¦åŠ å…¥çš„hash tableé‡Œï¼Œæ­¤æ—¶hash table ä¿å­˜çš„æ˜¯å½“å‰æ— é‡å¤çš„å­—ä¸²å­—ç¬¦ï¼Œlen = right-left+1;å½“å‡ºç°é‡å¤çš„å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½ç¡®å®šé‡å¤çš„å…ƒç´ åœ¨å­ä¸²çš„ä»€ä¹ˆä½ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ é™¤å­ä¸²æœ€å·¦è¾¹çš„å…ƒç´ ï¼Œç„¶åå»æ£€æµ‹æ˜¯å¦å¯ä»¥å’Œå³è¾¹çš„å­—ç¬¦å»é‡æ–°æ„æˆä¸€ä¸ªæ–°çš„æ— é‡å¤å­ä¸²ã€‚

```
å­—ç¬¦ä¸²ï¼šâ€œabbcdâ€
å½“æˆ‘ä»¬çš„å­—ä¸²ä¸ºabæ—¶,æˆ‘ä»¬æ£€æµ‹åˆ°ä¸‹ä¸€ä¸ªå­—ç¬¦bä¸èƒ½å»å’Œabæ„æˆä¸€ä¸ªæ–°çš„æ— é‡å¤å­ä¸²ï¼Œæˆ‘ä»¬å…ˆéœ€è¦åˆ é™¤a,å‘ç°bbç»„æˆçš„è¿˜æ˜¯é‡å¤å­ä¸²ï¼Œæ‰€æœ‰æˆ‘ä»¬éœ€è¦ä»bå¼€å§‹å»æ„å»ºæ–°çš„å­—ä¸²ã€‚
```

```go
// è‡ªå·±å®ç°ä¸€ä¸ªç®€å•çš„hashè¡¨
type HashTable struct {
	Array [128]byte
}

func hash(data byte)int{
	return int(data)
}

func (ht * HashTable)GetData(data byte)(isExist bool){
	index:= (len(ht.Array)-1)&hash(data)
	if d := ht.Array[index];d != 0{
		isExist =true
	}else{
		isExist =false
	}
	return
}

func (ht * HashTable)AddData(data byte){
	index:= (len(ht.Array)-1)&hash(data)
	ht.Array[index] =  data
}

func (ht * HashTable)DeleteData(data byte){
	index:= (len(ht.Array)-1)&hash(data)
	ht.Array[index] = 0
}

func lengthOfLongestSubstring(s string) int {
	maxLen,left,right,length := 0,0,0,len(s)
	ht := new(HashTable)
	for right <  length {
		// æ£€æµ‹å…ƒç´ åœ¨hashTableä¸­æ˜¯å¦å­˜åœ¨
		if isExist := ht.GetData(s[right]);isExist {
			// è¯´æ˜å­—ç¬¦åœ¨å­—ä¸²ä¸­å·²ç»å­˜åœ¨
			ht.DeleteData(s[left])
			left++
		}else{
			//  å­˜å…¥hashè¡¨ä¸­
			ht.AddData(s[right])
			right++
			if  size :=  right - left;size > maxLen{
				maxLen =size
			}

		}
	}
	return maxLen
}
```

```
	è§£ç­”æˆåŠŸ:
						æ‰§è¡Œè€—æ—¶:4 ms,å‡»è´¥äº†90.21% çš„Goç”¨æˆ·
						å†…å­˜æ¶ˆè€—:2.5 MB,å‡»è´¥äº†90.78% çš„Goç”¨æˆ·
```

```
æ—¶é—´å¤æ‚åº¦ï¼šæˆ‘ä»¬åªéœ€è¦éå†ä¸€æ¬¡å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸ºO(n)
ç©ºé—´å¤æ‚åº¦ï¼šå“ˆå¸Œè¡¨çš„é•¿åº¦æ—¶128ï¼Œå¸¸æ•°çº§åˆ«çš„ï¼Œæ‰€ä»¥æ—¶O(1)
```

* æœ€ä¼˜è§£

> ä½¿ç”¨åŒæŒ‡é’ˆå’Œhash tableçš„æ•ˆç‡å·²ç»å¾ˆé«˜äº†ï¼Œä½†æ˜¯å½“æ¯æ¬¡å‡ºç°é‡å¤çš„å­ç¬¦æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦ä¸æ–­çš„ç§»åŠ¨leftæŒ‡é’ˆå»åˆ é™¤ä¸rightæŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ ã€‚å½“é‡å¤çš„å­—ç¬¦å’Œrightç›¸é‚»æ—¶ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦ä¸æ–­ç§»åŠ¨leftï¼ŒæŒ‡é’ˆleft=right.è¿™æ ·å­å½“rightå’Œleftç›¸å·®å¾ˆå¤§çš„æ—¶å€™ï¼Œé¢‘ç¹çš„ç§»åŠ¨æ¯”è¾ƒè€—è´¹æ—¶é—´ã€‚æˆ‘ä»¬å¯ä»¥è®©hash tableä¸­ä¿å­˜å½“å‰å­—ç¬¦çš„ç´¢å¼•ã€‚
>
> å½“é‡å¤æ—¶æˆ‘ä»¬ç›´æ¥ç§»åŠ¨leftåˆ°å½“å‰ç´¢å¼•+1çš„ä½ç½®ï¼Œç”±äºæˆ‘ä»¬çš„leftæŒ‡é’ˆæ—¶è·³è·ƒç§»åŠ¨çš„ï¼Œæ²¡æœ‰å»åˆ é™¤hash tableä¸­çš„ä¿å­˜çš„ç´¢å¼•ï¼Œå½“ä¸‹æ¬¡å…ƒç´ å‡ºç°é‡å¤çš„æ—¶å€™ï¼Œé‡å¤ä½ç½®çš„ç´¢å¼•æ˜¯å°äºleft.åªæœ‰å¤§äºleftçš„ç´¢å¼•æ‰æ˜¯åˆæ³•çš„ã€‚
>
> ä¸ç®¡å­—ç¬¦æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å»æ›´æ–°hash tableä¸­rightæŒ‡å‘å­—ç¬¦çš„ç´¢å¼•ã€‚

```go
/*
	åœ¨ä¸Šé¢ä»£ç çš„åŸºç¡€ä¸Šè¿›è¡Œä¼˜åŒ–ï¼Œhash tableä¸­ä¿å­˜å­—ç¬¦çš„ä½ç½®ä¿¡æ¯ï¼Œè¿™æ ·å­å½“å…ƒç´ é‡å¤çš„æ—¶å€™å¯ä»¥å¿«é€Ÿçš„å®šä½leftçš„ä½ç½®
 */


// è‡ªå·±å®ç°ä¸€ä¸ªç®€å•çš„hashè¡¨
type HashTable struct {
	Array [128]int
}

func hash(data byte)int{
	return int(data)
}
//  åˆå§‹åŒ–hash tableä¸­çš„å€¼
func (ht * HashTable)Init(val int){
	for index := range ht.Array{
		ht.Array[index] = val
	}
}

func (ht * HashTable)GetData(data byte)(val int,isExist bool){
	index:= (len(ht.Array)-1)&hash(data)
	if val = ht.Array[index];val != -1{
		isExist =true
	}else{
		isExist =false
	}
	return
}

func (ht * HashTable)AddData(data byte,position int){
	index:= (len(ht.Array)-1)&hash(data)
	ht.Array[index] =  position
}

func (ht * HashTable)DeleteData(data byte){
	index:= (len(ht.Array)-1)&hash(data)
	ht.Array[index] = 0
}




func lengthOfLongestSubstring(s string) int {
	maxLen,left,right,length := 0,0,0,len(s)
	ht := new(HashTable)
	//  å°†hash table ä¸­çš„ä½ç½®ä¿¡æ¯å…¨éƒ¨åˆå§‹åŒ–ä¸º-1
	ht.Init(-1)
	for right <  length {
		// æ£€æµ‹å…ƒç´ åœ¨hashTableä¸­æ˜¯å¦å­˜åœ¨
		if pos,isExist := ht.GetData(s[right]);isExist {
			// è¯´æ˜å­—ç¬¦åœ¨å­—ä¸²ä¸­å·²ç»å­˜åœ¨ï¼Œç§»åŠ¨leftæŒ‡é’ˆåˆ°æŒ‡å®šä½ç½®
			leftIndex := pos + 1
			if leftIndex > left{
				left =  leftIndex
			}
		}
		//  æ— è®ºå­—ç¬¦æ˜¯å¦ç›¸ç­‰ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å»ä¿å­˜rightæŒ‡å‘å­—ç¬¦çš„ä½ç½®
		ht.AddData(s[right],right)
		//  è®¡ç®—å½“å‰å­ä¸²çš„é•¿åº¦
		if length:=right-left+1;length > maxLen{
			maxLen = length
		}
		right++
	}
	return maxLen
}
```

```
	è§£ç­”æˆåŠŸ:
						æ‰§è¡Œè€—æ—¶:0 ms,å‡»è´¥äº†100.00% çš„Goç”¨æˆ·
						å†…å­˜æ¶ˆè€—:2.5 MB,å‡»è´¥äº†99.28% çš„Goç”¨æˆ·
```

```
æ—¶é—´å¤æ‚åº¦ï¼šO(n) éå†å­—ç¬¦ä¸²ä¸€æ¬¡
ç©ºé—´å¤æ‚åº¦ï¼šO(1) hash tableçš„åº•å±‚æ•°ç»„
```

## å“ˆå¸Œè¡¨

å“ˆå¸Œè¡¨åˆå«æ•£åˆ—è¡¨ã€‚è¿™ç§æ•°æ®ç»“æ„æä¾›äº†å¥å’Œå€¼çš„æ˜ å°„å…³ç³»ï¼Œç»™å‡ºä¸€ä¸ªkeyå°±å¯ä»¥åœ¨O(1)çš„æ—¶é—´å†…æ‰¾å‡ºå¯¹åº”çš„value.å“ˆå¸Œè¡¨çš„åº•å±‚ä½¿ç”¨æ•°ç»„å»å®ç°çš„ï¼Œè€Œå°†keyè½¬æˆæ•°ç»„çš„ä¸‹æ ‡çš„æ–¹æ³•ä¾¿æ˜¯å“ˆå¸Œå‡½æ•°ã€‚javaä¸­æ¯ä¸ªå¯¹è±¡éƒ½æœ‰æœ‰ä¸ªHashCodeï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å–æ¨¡è¿ç®—æ¥å¾—åˆ°æ•°ç»„çš„ä¸‹æ ‡ã€‚

```
index = HashCode / Array.length
```

ä½†æ˜¯é€šå¸¸ä½¿ç”¨æ•ˆç‡æ›´é«˜çš„ä½è¿ç®—

```
index = HashCode & (Array.length-1)
```

å½“ä¸¤ä¸ªå¯¹è±¡é€šè¿‡å“ˆå¸Œå‡½æ•°å¾—åˆ°æ•°ç»„çš„ä¸‹æ ‡ç›¸ç­‰æ—¶ï¼Œè¿™æ—¶å€™å°±ä¼šäº§ç”Ÿå“ˆå¸Œå†²çªã€‚è§£å†³å“ˆå¸Œå†²çªçš„æ–¹æ³•æœ‰ï¼š

* å¼€æ”¾åœ°å€æ³•

æ‰€è°“çš„å¼€æ”¾åœ°å€æ³•å°±æ˜¯å½“å‡ºç°å½“å¯¹åº”ä¸‹æ ‡å·²ç»æœ‰å€¼æ—¶ï¼Œæˆ‘ä»¬å°±å»æ‰¾ä¸€ä¸ªæ–°çš„ä½ç½®ï¼Œå¦‚æ‰¾å½“å‰ä¸‹è¡¨çš„åä¸€ä¸ªï¼Œå¦‚æœåä¸€ä¸ªè¿˜æœ‰å€¼ï¼Œé‚£å°±å†åä¸€ä¸ªï¼Œç›´åˆ°æ²¡æœ‰è¢«å ç”¨è¢«å€¼ã€‚

* é“¾è¡¨æ³•

é“¾è¡¨æ³•å°±æ˜¯æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ æ˜¯é“¾è¡¨çš„å¤´æŒ‡é’ˆï¼Œå½“å‡ºç°å“ˆå¸Œå†²çªæ—¶ï¼Œå°†åé¢çš„å€¼æ·»åŠ åˆ°é“¾è¡¨ä¸Šã€‚

æˆ‘ä»¬æŸ¥æ‰¾æŸä¸ªkeyå¯¹åº”çš„å€¼ã€‚ç”±äºæœ‰å“ˆå¸Œå†²çªï¼Œä¸€ä¸ªkeyå¯èƒ½åœ¨å“ˆå¸Œè¡¨ä¸­å¯¹åº”å¤šä¸ªå€¼ï¼Œä»¥é“¾è¡¨æ³•ä¸ºä¾‹ï¼Œkey -> indexä¸Šçš„é“¾è¡¨æœ‰å¤šä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦éå†é“¾è¡¨èŠ‚ç‚¹ï¼Œå–å‡ºæ¯ä¸ªå¯¹è±¡ï¼Œå»åˆ¤æ–­ä»–çš„keyæ˜¯å¦ç­‰äºå½“å‰key.



